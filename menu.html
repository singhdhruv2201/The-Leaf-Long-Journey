<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Leaf Long Journey — Menu</title>
  <!-- Tailwind CDN (for dev/demo) -->
  <link rel="stylesheet" href="assets/tailwind.css" />
</head>
<body style="opacity:0; background: linear-gradient(180deg, rgba(249, 166, 0, 0.954), rgba(255, 189, 56, 0.882));">
  <!-- Back button: go back to index.html -->
  <button id="backBtn" aria-label="Back to landing" title="Back" style="position:fixed;left:12px;top:12px;z-index:60;width:44px;height:44px;border-radius:9999px;background:rgba(0,0,0,0.6);border:0;color:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(0,0,0,0.45);">
    <!-- left arrow SVG -->
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>
  <div class="max-w-6xl mx-auto px-6 py-12 grid grid-cols-1 lg:grid-cols-3 gap-8 items-start">
  <main class="lg:col-span-2 bg-transparent rounded-2xl p-8 shadow-xl">
      <div class="flex items-center gap-6">
  <img class="w-28 h-28 object-contain" src="assets/Gemini_Generated_logo_fall_background.png" alt="logo" />
        <div>
          <h1 class="text-3xl font-extrabold text-white">The Leaf Long Journey</h1>
          <p class="mt-1 text-slate-300">Choose an environment to start. Each environment is a separate scene file and will load into the game page.</p>
        </div>
      </div>

      <div id="envList" class="mt-8 grid grid-cols-1 gap-4">
        <!-- Environment cards -->
        <a data-thumb="assets/thumbnail/fall_road_thumb.png" class="envCard group block bg-slate-800/60 border border-slate-700 rounded-lg p-4 hover:scale-102 transform transition will-change-transform" href="index.html?env=road">
          <div class="flex flex-col items-center gap-4">
            <div class="w-full h-44 bg-black rounded overflow-hidden flex items-center justify-center mb-2">
              <img src="assets/thumbnail/fall_road_thumb.png" alt="road thumb" class="w-full h-full object-cover"/>
            </div>
            <div class="w-full text-center">
              <h3 class="env-title text-white">Road</h3>
              <p class="env-sub">Industrial road environment (collidable road model)</p>
              <div style="margin-top:8px"><button class="creditsToggle text-sm text-indigo-500 underline bg-transparent border-0 p-0" data-target="credits-road">Credits</button></div>
              <div id="credits-road" class="text-sm text-slate-400 mt-2 hidden" style="text-align:left">Road model © Asset Provider. Contact for licensing info.</div>
            </div>
          </div>
        </a>

        <!-- Scene and Leafs Scene removed per request -->

        <a class="envCard group block bg-slate-800/60 border border-slate-700 rounded-lg p-4 hover:scale-102 transform transition" href="index.html?env=autumn_nest">
          <div class="flex flex-col items-center gap-4">
            <div class="w-full h-44 bg-black rounded overflow-hidden flex items-center justify-center mb-2">
              <img src="assets/thumbnail/autumn_nest_thumb.png" alt="autumn thumb" class="w-full h-full object-cover"/>
            </div>
            <div class="w-full text-center">
              <h3 class="env-title text-white">Autumn Nest</h3>
              <p class="env-sub">Cozy autumn scene with foliage and nest</p>
              <div style="margin-top:8px">
                <button class="creditsToggle text-sm text-indigo-500 underline bg-transparent border-0 p-0" data-modal="modal-autumn">Credits</button>
              </div>
              <div id="credits-autumn" class="text-sm text-slate-400 mt-2 hidden" style="text-align:left"></div>
            </div>
          </div>
        </a>

        <a class="envCard group block bg-slate-800/60 border border-slate-700 rounded-lg p-4 hover:scale-102 transform transition" href="index.html?env=gravity-falls">
          <div class="flex flex-col items-center gap-4">
            <div class="w-full h-44 bg-black rounded overflow-hidden flex items-center justify-center mb-2">
              <img src="assets/thumbnail/gravity_falls_thumb.png" alt="gravity falls thumb" class="w-full h-full object-cover"/>
            </div>
            <div class="w-full text-center">
              <h3 class="env-title text-white">Gravity Falls</h3>
              <p class="env-sub">New environment: Gravity Falls</p>
              <div style="margin-top:8px"><button class="creditsToggle text-sm text-indigo-500 underline bg-transparent border-0 p-0" data-target="credits-gf">Credits</button></div>
              <div id="credits-gf" class="text-sm text-slate-400 mt-2 hidden" style="text-align:left">Gravity Falls model © Asset Provider. Contact for licensing info.</div>
            </div>
          </div>
        </a>

        <a class="envCard group block bg-slate-800/60 border border-slate-700 rounded-lg p-4 hover:scale-102 transform transition" href="index.html?env=house_on_the_hill">
          <div class="flex flex-col items-center gap-4">
            <div class="w-full h-44 bg-black rounded overflow-hidden flex items-center justify-center mb-2">
              <img src="assets/thumbnail/house_on_the_hill_thumb.png" alt="house on the hill thumb" class="w-full h-full object-cover"/>
            </div>
            <div class="w-full text-center">
              <h3 class="env-title text-white">House on the Hill</h3>
              <p class="env-sub">Quaint house and hill environment</p>
              <div style="margin-top:8px"><button class="creditsToggle text-sm text-indigo-500 underline bg-transparent border-0 p-0" data-modal="modal-house">Credits</button></div>
              <div id="credits-house" class="text-sm text-slate-400 mt-2 hidden" style="text-align:left"></div>
            </div>
          </div>
        </a>
      </div>

  <!-- Footer line removed per request -->
    </main>

    <!-- Controls/Notes aside removed per request -->
</body>

  <script>
    // Helper: ensure Motion One is loaded (returns the global `motion` object)
    function ensureMotionOne(timeout = 5000) {
      // Try a local vendor file first (assets/motion.min.js), then fall back to CDN
      return new Promise((resolve, reject) => {
        try { if (typeof window !== 'undefined' && window.motion) return resolve(window.motion); } catch (e) {}

        const tryLoad = (src) => new Promise((res, rej) => {
          const s = document.createElement('script');
          let done = false;
          const t = setTimeout(() => { if (done) return; done = true; rej(new Error('load timeout')); }, timeout);
          s.src = src; s.async = true;
          s.onload = () => { if (done) return; done = true; clearTimeout(t); res(window.motion || true); };
          s.onerror = (err) => { if (done) return; done = true; clearTimeout(t); rej(err); };
          document.head.appendChild(s);
        });

        (async () => {
          try {
            // try local
            await tryLoad('assets/motion.min.js');
            return resolve(window.motion || null);
          } catch (e) {
            // local failed — try CDN
            try {
              await tryLoad('https://unpkg.com/motion@10.17.7/dist/motion.min.js');
              return resolve(window.motion || null);
            } catch (err) {
              return reject(err);
            }
          }
        })();
      });
    }

    (async function(){
      try {
        const motionLib = await ensureMotionOne().catch((e) => { console.warn('Failed to load Motion One, skipping animations', e); return null; });
        // fade-in page on load
        try {
          if (motionLib && motionLib.animate) {
            motionLib.animate(document.body, { opacity: [0,1] }, { duration: 420, easing: 'ease' });
          } else {
            document.body.style.opacity = '1';
          }
        } catch (e) { document.body.style.opacity = '1'; }
        if (!motionLib) return;
        const cards = Array.from(document.querySelectorAll('.envCard'));
        // staggered entrance
        motionLib.animate(cards, { opacity: [0,1], transform: ['translateY(10px) scale(0.98)','translateY(0px) scale(1)'] }, { delay: 0.05, duration: 0.6, easing: 'ease' });
        // hover scale via pointer events
        cards.forEach(c => {
          c.addEventListener('pointerenter', () => motionLib.animate(c, { scale: 1.03 }, { duration: 0.18 }));
          c.addEventListener('pointerleave', () => motionLib.animate(c, { scale: 1.0 }, { duration: 0.18 }));
        });
        // Credits toggles and modal openers
        document.querySelectorAll('.creditsToggle').forEach(btn => {
          btn.addEventListener('click', (e) => {
            e.preventDefault();
            // If the button targets a modal, open that modal
            const modalId = btn.dataset.modal;
            if (modalId) {
              const modal = document.getElementById(modalId);
              if (!modal) return;
              modal.classList.remove('hidden');
              modal.classList.add('flex');
              // trap focus briefly on modal
              const focusable = modal.querySelector('button, a, [tabindex]');
              if (focusable) focusable.focus();
              return;
            }
            // fallback: inline credits toggle
            const id = btn.dataset.target;
            const el = document.getElementById(id);
            if (!el) return;
            if (el.classList.contains('hidden')) {
              el.classList.remove('hidden');
            } else {
              el.classList.add('hidden');
            }
          });
        });

        // Modal close handlers (elements with data-modal-close or clicking backdrop)
        document.querySelectorAll('[data-modal-close]').forEach(el => {
          el.addEventListener('click', (e) => {
            // find parent modal container
            const modal = el.closest('#modal-autumn') || el.closest('[id^="modal-"]');
            if (!modal) return;
            modal.classList.add('hidden');
            modal.classList.remove('flex');
          });
        });
      } catch (e) { console.warn('Motion animate failed', e); }
    })();
  
  // Back button handler
  (function(){
    const back = document.getElementById('backBtn');
    if (!back) return;
    back.addEventListener('click', async () => {
      try {
        const motionLib = await ensureMotionOne().catch(() => null);
        if (motionLib && motionLib.animate) {
          await motionLib.animate(document.body, { opacity: [1,0], filter: ['blur(0px)','blur(4px)'] }, { duration: 360 }).finished;
        } else {
          document.body.style.opacity = '0';
        }
      } catch (e) {}
      window.location.href = 'index.html';
    });
  })();
  </script>

  <!-- Autumn Nest Credits Modal -->
  <div id="modal-autumn" class="fixed inset-0 z-50 hidden items-center justify-center px-4 py-8">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" data-modal-close></div>
    <div class="relative bg-white/6 backdrop-blur-md text-slate-100 rounded-2xl max-w-md w-full max-h-[80vh] p-6 shadow-2xl border border-slate-700 overflow-auto">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold">Autumn Nest — Model Credits</h2>
        <button data-modal-close class="text-slate-400 hover:text-white bg-transparent border-0">✕</button>
      </div>
  <div class="mt-4 text-sm leading-relaxed text-slate-200" style="white-space:pre-wrap; text-align:left;">
Model Information:
* title:	Autumn Nest
* source:	https://sketchfab.com/3d-models/autumn-nest-9ff48b4830e2418f92e1b75afb160a52
* author:	kennethtzh (https://sketchfab.com/kennethtzh)

Model License:
* license type:	CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)
* requirements:	Author must be credited. Commercial use is allowed.

If you use this 3D model in your project be sure to copy paste this credit wherever you share it:
This work is based on "Autumn Nest" (https://sketchfab.com/3d-models/autumn-nest-9ff48b4830e2418f92e1b75afb160a52) by kennethtzh (https://sketchfab.com/kennethtzh) licensed under CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)
      </div>
    </div>
  </div>

  <!-- House on the Hill Credits Modal -->
  <div id="modal-house" class="fixed inset-0 z-50 hidden items-center justify-center px-4 py-8">
    <div class="absolute inset-0 bg-black/40 backdrop-blur-sm" data-modal-close></div>
    <div class="relative bg-white/6 backdrop-blur-md text-slate-100 rounded-2xl max-w-md w-full max-h-[80vh] p-6 shadow-2xl border border-slate-700 overflow-auto">
      <div class="flex items-start justify-between gap-4">
        <h2 class="text-xl font-semibold">House on the Hill — Model Credits</h2>
        <button data-modal-close class="text-slate-400 hover:text-white bg-transparent border-0">✕</button>
      </div>
      <div class="mt-4 text-sm leading-relaxed text-slate-200" style="white-space:pre-wrap; text-align:left">
Model Information:
* title:	House on the Hill
* source:	https://sketchfab.com/3d-models/house-on-the-hill-3efa0f73228946009b9a8ee885f59165
* author:	Shahriar Shahrabi (https://sketchfab.com/shahriyarshahrabi)

Model License:
* license type:	CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)
* requirements:	Author must be credited. Commercial use is allowed.

If you use this 3D model in your project be sure to copy paste this credit wherever you share it:
This work is based on "House on the Hill" (https://sketchfab.com/3d-models/house-on-the-hill-3efa0f73228946009b9a8ee885f59165) by Shahriar Shahrabi (https://sketchfab.com/shahriyarshahrabi) licensed under CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)
      </div>
    </div>
  </div>
</html>